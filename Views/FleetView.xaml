<UserControl x:Class="AeroFleetManagerPro.Views.FleetView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             xmlns:converters="clr-namespace:AeroFleetManagerPro.Converters"
             mc:Ignorable="d">
    
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <DockPanel Grid.Row="0" Margin="0,0,0,20">
            <TextBlock Text="Ð£Ð¿Ñ€Ð°Ð²Ð»Ñ–Ð½Ð½Ñ Ñ„Ð»Ð¾Ñ‚Ð¾Ð¼" 
                     FontSize="28" 
                     FontWeight="Bold" 
                     VerticalAlignment="Center"
                     Foreground="#2196F3"/>
            
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                <Button Style="{StaticResource PrimaryButton}"
                      Command="{Binding AddAircraftCommand}"
                      Margin="5">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="+" Margin="0,0,5,0"/>
                        <TextBlock Text="Ð”Ð¾Ð´Ð°Ñ‚Ð¸ Ð»Ñ–Ñ‚Ð°Ðº"/>
                    </StackPanel>
                </Button>
                
                <Button Background="White" BorderBrush="#2196F3" BorderThickness="1" Padding="12,8"
                      Command="{Binding LoadAircraftCommand}"
                      IsEnabled="{Binding IsLoading, Converter={StaticResource InvertBoolConverter}}"
                      Margin="5">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="â†»" Margin="0,0,5,0"/>
                        <TextBlock Text="ÐžÐ½Ð¾Ð²Ð¸Ñ‚Ð¸"/>
                    </StackPanel>
                </Button>
            </StackPanel>
        </DockPanel>

        <Border Grid.Row="1" Padding="15" Margin="0,0,0,15">
            <StackPanel>
                <TextBlock Text="Ð¤Ñ–Ð»ÑŒÑ‚Ñ€Ð¸" FontWeight="Medium" Margin="0,0,0,10"/>
                <UniformGrid Columns="3">
                    <StackPanel Margin="0,0,10,0">
                        <TextBlock Text="ÐŸÐ¾ÑˆÑƒÐº" Margin="0,0,0,5"/>
                        <TextBox Text="{Binding SearchText, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                               ToolTip="ÐŸÐ¾ÑˆÑƒÐº Ð·Ð° Ñ€ÐµÑ”ÑÑ‚Ñ€Ð°Ñ†Ñ–Ñ”ÑŽ, Ð¼Ð¾Ð´ÐµÐ»Ð»ÑŽ..."/>
                    </StackPanel>
                    
                    <StackPanel Margin="10,0">
                        <TextBlock Text="Ð¡Ñ‚Ð°Ñ‚ÑƒÑ" Margin="0,0,0,5"/>
                        <ComboBox ItemsSource="{Binding StatusFilters}"
                                SelectedItem="{Binding SelectedStatusFilter}"
                                Background="White" BorderBrush="#DDDDDD" BorderThickness="1" Padding="8"/>
                    </StackPanel>
                    
                    <StackPanel Margin="10,0,0,0">
                        <TextBlock Text="Ð’Ð¸Ñ€Ð¾Ð±Ð½Ð¸Ðº" Margin="0,0,0,5"/>
                        <ComboBox ItemsSource="{Binding ManufacturerFilters}"
                                SelectedItem="{Binding SelectedManufacturerFilter}"
                                Background="White" BorderBrush="#DDDDDD" BorderThickness="1" Padding="8"/>
                    </StackPanel>
                </UniformGrid>
            </StackPanel>
        </Border>

        <Grid Grid.Row="2">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <Border Grid.Column="0" Margin="0,0,10,0">
                <DockPanel>
                    <TextBlock DockPanel.Dock="Top" 
                             Text="Ð¡Ð¿Ð¸ÑÐ¾Ðº Ð»Ñ–Ñ‚Ð°ÐºÑ–Ð²" 
                             FontSize="18" 
                             FontWeight="Medium" 
                             Margin="20,20,20,15"/>
                    
                    <ProgressBar DockPanel.Dock="Top"
                               IsIndeterminate="True"
                               Visibility="{Binding IsLoading, Converter={StaticResource BoolToVisibilityConverter}}"
                               Margin="20,0,20,15"/>
                    
                    <DataGrid ItemsSource="{Binding AircraftView}"
                            SelectedItem="{Binding SelectedAircraft}"
                            AutoGenerateColumns="False"
                            IsReadOnly="True"
                            GridLinesVisibility="Horizontal"
                            HeadersVisibility="Column"
                            Margin="20,0,20,20">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Ð ÐµÑ”ÑÑ‚Ñ€Ð°Ñ†Ñ–Ñ" 
                                              Binding="{Binding RegistrationNumber}" 
                                              Width="120"/>
                            <DataGridTextColumn Header="Ð’Ð¸Ñ€Ð¾Ð±Ð½Ð¸Ðº" 
                                              Binding="{Binding Manufacturer}" 
                                              Width="100"/>
                            <DataGridTextColumn Header="ÐœÐ¾Ð´ÐµÐ»ÑŒ" 
                                              Binding="{Binding Model}" 
                                              Width="120"/>
                            <DataGridTextColumn Header="Ð Ñ–Ðº" 
                                              Binding="{Binding YearOfManufacture}" 
                                              Width="80"/>
                            <DataGridTemplateColumn Header="Ð¡Ñ‚Ð°Ñ‚ÑƒÑ" Width="100">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <Border Background="{Binding Status, Converter={StaticResource StatusToBrushConverter}}"
                                              CornerRadius="3"
                                              Padding="8,2">
                                            <TextBlock Text="{Binding Status}"
                                                     Foreground="White"
                                                     FontSize="11"
                                                     HorizontalAlignment="Center"/>
                                        </Border>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                            <DataGridTextColumn Header="Ð Ð¾Ð·Ñ‚Ð°ÑˆÑƒÐ²Ð°Ð½Ð½Ñ" 
                                              Binding="{Binding CurrentLocation}" 
                                              Width="*"/>
                        </DataGrid.Columns>
                    </DataGrid>
                </DockPanel>
            </Border>

            <Border Grid.Column="1" Margin="10,0,0,0">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="20">
                        <TextBlock Text="Ð”ÐµÑ‚Ð°Ð»Ñ– Ð»Ñ–Ñ‚Ð°ÐºÐ°" 
                                 FontSize="18" 
                                 FontWeight="Medium" 
                                 Margin="0,0,0,15"/>
                        
                        <StackPanel Visibility="{Binding SelectedAircraft, Converter={StaticResource NullToVisibilityConverter}}">
                            <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                                <Button Style="{StaticResource PrimaryButton}"
                                      Command="{Binding EditAircraftCommand}"
                                      Margin="0,0,5,0">
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="âœ" Margin="0,0,5,0"/>
                                        <TextBlock Text="Ð ÐµÐ´Ð°Ð³ÑƒÐ²Ð°Ñ‚Ð¸"/>
                                    </StackPanel>
                                </Button>
                                
                                <Button Background="White" BorderBrush="Red" BorderThickness="1" Padding="12,8"
                                      Command="{Binding DeleteAircraftCommand}"
                                      Foreground="Red">
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="ðŸ—‘" Margin="0,0,5,0"/>
                                        <TextBlock Text="Ð’Ð¸Ð´Ð°Ð»Ð¸Ñ‚Ð¸"/>
                                    </StackPanel>
                                </Button>
                            </StackPanel>
                            
                            <Separator Margin="0,0,0,15"/>
                            
                            <TextBlock>
                                <Run Text="Ð ÐµÑ”ÑÑ‚Ñ€Ð°Ñ†Ñ–Ñ:" FontWeight="Medium"/>
                                <Run Text="{Binding SelectedAircraft.RegistrationNumber}"/>
                            </TextBlock>
                            
                            <TextBlock Margin="0,5,0,0">
                                <Run Text="Ð’Ð¸Ñ€Ð¾Ð±Ð½Ð¸Ðº:" FontWeight="Medium"/>
                                <Run Text="{Binding SelectedAircraft.Manufacturer}"/>
                            </TextBlock>
                            
                            <TextBlock Margin="0,5,0,0">
                                <Run Text="ÐœÐ¾Ð´ÐµÐ»ÑŒ:" FontWeight="Medium"/>
                                <Run Text="{Binding SelectedAircraft.Model}"/>
                            </TextBlock>
                            
                            <TextBlock Margin="0,5,0,0">
                                <Run Text="Ð Ñ–Ðº:" FontWeight="Medium"/>
                                <Run Text="{Binding SelectedAircraft.YearOfManufacture}"/>
                            </TextBlock>
                            
                            <TextBlock Margin="0,5,0,0">
                                <Run Text="ÐœÑ–ÑÑ‚ÐºÑ–ÑÑ‚ÑŒ:" FontWeight="Medium"/>
                                <Run Text="{Binding SelectedAircraft.PassengerCapacity}"/>
                                <Run Text="Ð¿Ð°ÑÐ°Ð¶Ð¸Ñ€Ñ–Ð²"/>
                            </TextBlock>
                            
                            <TextBlock Margin="0,5,0,0">
                                <Run Text="ÐÐ°Ð»Ñ–Ñ‚ Ð³Ð¾Ð´Ð¸Ð½:" FontWeight="Medium"/>
                                <Run Text="{Binding SelectedAircraft.FlightHours, StringFormat='{}{0:N0}'}"/>
                            </TextBlock>
                            
                            <TextBlock Margin="0,5,0,0">
                                <Run Text="ÐšÑ–Ð»ÑŒÐºÑ–ÑÑ‚ÑŒ Ñ†Ð¸ÐºÐ»Ñ–Ð²:" FontWeight="Medium"/>
                                <Run Text="{Binding SelectedAircraft.FlightCycles, StringFormat='{}{0:N0}'}"/>
                            </TextBlock>
                            
                            <TextBlock Margin="0,5,0,0">
                                <Run Text="Ð”Ð°Ð»ÑŒÐ½Ñ–ÑÑ‚ÑŒ:" FontWeight="Medium"/>
                                <Run Text="{Binding SelectedAircraft.Range, StringFormat='{}{0:N0} km'}"/>
                            </TextBlock>
                            
                            <TextBlock Margin="0,5,0,0">
                                <Run Text="ÐžÑÑ‚Ð°Ð½Ð½Ñ” Ð¢Ðž:" FontWeight="Medium"/>
                                <Run Text="{Binding SelectedAircraft.LastMaintenanceDate, StringFormat='{}{0:dd/MM/yyyy}'}"/>
                            </TextBlock>
                            
                            <TextBlock Margin="0,5,0,0">
                                <Run Text="ÐÐ°ÑÑ‚ÑƒÐ¿Ð½Ðµ Ð¢Ðž:" FontWeight="Medium"/>
                                <Run Text="{Binding SelectedAircraft.NextMaintenanceDate, StringFormat='{}{0:dd/MM/yyyy}'}"/>
                            </TextBlock>
                        </StackPanel>
                        
                        <TextBlock Text="ÐžÐ±ÐµÑ€Ñ–Ñ‚ÑŒ Ð»Ñ–Ñ‚Ð°Ðº Ð´Ð»Ñ Ð¿ÐµÑ€ÐµÐ³Ð»ÑÐ´Ñƒ Ð´ÐµÑ‚Ð°Ð»ÐµÐ¹" 
                                 Visibility="{Binding SelectedAircraft, Converter={StaticResource NullToVisibilityConverter}, ConverterParameter=Invert}"
                                 Foreground="Gray"
                                 HorizontalAlignment="Center"
                                 VerticalAlignment="Center"/>
                    </StackPanel>
                </ScrollViewer>
            </Border>
        </Grid>
    </Grid>
</UserControl>