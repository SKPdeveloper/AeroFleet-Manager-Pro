<UserControl x:Class="AeroFleetManagerPro.Views.DashboardView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             xmlns:converters="clr-namespace:AeroFleetManagerPro.Converters">
    
    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <Grid Margin="20">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Ð—Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº -->
            <DockPanel Grid.Row="0" Margin="0,0,0,20">
                <TextBlock Text="ÐŸÐ°Ð½ÐµÐ»ÑŒ ÑƒÐ¿Ñ€Ð°Ð²Ð»Ñ–Ð½Ð½Ñ" 
                         FontSize="28" 
                         FontWeight="Bold" 
                         VerticalAlignment="Center"
                         Foreground="#2196F3"/>
                
                <Button Style="{StaticResource PrimaryButton}"
                      Command="{Binding RefreshDashboardCommand}"
                      HorizontalAlignment="Right">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="â†»" Margin="0,0,5,0"/>
                        <TextBlock Text="ÐžÐ½Ð¾Ð²Ð¸Ñ‚Ð¸"/>
                    </StackPanel>
                </Button>
            </DockPanel>

            <!-- KPI ÐºÐ°Ñ€Ñ‚ÐºÐ¸ -->
            <UniformGrid Grid.Row="1" Columns="4" Margin="0,0,0,20">
                
                <Border Style="{StaticResource CardStyle}">
                    <StackPanel>
                        <TextBlock Text="âœˆ" 
                                               FontSize="40" 
                                               Foreground="#2196F3"/>
                        <TextBlock Text="{Binding TotalAircraft}" 
                                 FontSize="32" 
                                 FontWeight="Bold" 
                                 HorizontalAlignment="Center"/>
                        <TextBlock Text="Ð’ÑÑŒÐ¾Ð³Ð¾ Ð»Ñ–Ñ‚Ð°ÐºÑ–Ð²" 
                                 FontSize="14" 
                                 Foreground="Gray" 
                                 HorizontalAlignment="Center"/>
                    </StackPanel>
                </Border>

                <Border Style="{StaticResource CardStyle}">
                    <StackPanel>
                        <TextBlock Text="âœˆ" 
                                               FontSize="40" 
                                               Foreground="Green"/>
                        <TextBlock Text="{Binding ActiveAircraft}" 
                                 FontSize="32" 
                                 FontWeight="Bold" 
                                 HorizontalAlignment="Center"/>
                        <TextBlock Text="ÐÐºÑ‚Ð¸Ð²Ð½Ð¸Ñ… Ð»Ñ–Ñ‚Ð°ÐºÑ–Ð²" 
                                 FontSize="14" 
                                 Foreground="Gray" 
                                 HorizontalAlignment="Center"/>
                    </StackPanel>
                </Border>

                <Border Style="{StaticResource CardStyle}">
                    <StackPanel>
                        <TextBlock Text="ðŸ”§" 
                                               FontSize="40" 
                                               Foreground="Orange"/>
                        <TextBlock Text="{Binding MaintenanceAircraft}" 
                                 FontSize="32" 
                                 FontWeight="Bold" 
                                 HorizontalAlignment="Center"/>
                        <TextBlock Text="ÐÐ° Ð¾Ð±ÑÐ»ÑƒÐ³Ð¾Ð²ÑƒÐ²Ð°Ð½Ð½Ñ–" 
                                 FontSize="14" 
                                 Foreground="Gray" 
                                 HorizontalAlignment="Center"/>
                    </StackPanel>
                </Border>

                <Border Style="{StaticResource CardStyle}">
                    <StackPanel>
                        <TextBlock Text="â°" 
                                               FontSize="40" 
                                               Foreground="#2196F3"/>
                        <TextBlock Text="{Binding TotalFlightHours, StringFormat='{}{0:N0}'}" 
                                 FontSize="32" 
                                 FontWeight="Bold" 
                                 HorizontalAlignment="Center"/>
                        <TextBlock Text="ÐÐ°Ð»ÐµÑ‚ Ð³Ð¾Ð´Ð¸Ð½" 
                                 FontSize="14" 
                                 Foreground="Gray" 
                                 HorizontalAlignment="Center"/>
                    </StackPanel>
                </Border>
            </UniformGrid>

            <!-- ÐÐ°Ð¹Ð±Ð»Ð¸Ð¶Ñ‡Ðµ Ð¾Ð±ÑÐ»ÑƒÐ³Ð¾Ð²ÑƒÐ²Ð°Ð½Ð½Ñ -->
            <Border Grid.Row="2" Style="{StaticResource CardStyle}">
                <DockPanel>
                    <StackPanel DockPanel.Dock="Top">
                        <TextBlock Text="ÐÐ°Ð¹Ð±Ð»Ð¸Ð¶Ñ‡Ðµ Ñ‚ÐµÑ…Ð½Ñ–Ñ‡Ð½Ðµ Ð¾Ð±ÑÐ»ÑƒÐ³Ð¾Ð²ÑƒÐ²Ð°Ð½Ð½Ñ" 
                                 FontSize="18" 
                                 FontWeight="Medium"/>
                        <Separator Margin="0,10,0,15"/>
                    </StackPanel>
                    
                    <DataGrid ItemsSource="{Binding UpcomingMaintenance}"
                            AutoGenerateColumns="False"
                            IsReadOnly="True"
                            GridLinesVisibility="Horizontal"
                            HeadersVisibility="Column">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Ð‘Ð¾Ñ€Ñ‚. Ð½Ð¾Ð¼ÐµÑ€" 
                                              Binding="{Binding RegistrationNumber}" 
                                              Width="120"/>
                            <DataGridTextColumn Header="ÐœÐ¾Ð´ÐµÐ»ÑŒ" 
                                              Binding="{Binding Model}" 
                                              Width="150"/>
                            <DataGridTextColumn Header="Ð”Ð°Ñ‚Ð° Ð¢Ðž" 
                                              Binding="{Binding NextMaintenanceDate, StringFormat='{}{0:dd/MM/yyyy}'}" 
                                              Width="130"/>
                            <DataGridTextColumn Header="Ð Ð¾Ð·Ñ‚Ð°ÑˆÑƒÐ²Ð°Ð½Ð½Ñ" 
                                              Binding="{Binding CurrentLocation}" 
                                              Width="*"/>
                        </DataGrid.Columns>
                    </DataGrid>
                </DockPanel>
            </Border>
        </Grid>
    </ScrollViewer>
</UserControl>